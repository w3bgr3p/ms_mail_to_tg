# ms_mail_to_tg

-   **Инструкция по получению API и данных для авторизации через Microsoft Graph API для Outlook Mail:**
    1.  **Регистрация приложения в Azure AD:**
        
        -   Перейдите на [Azure Portal](https://portal.azure.com/).
        -   В левом меню выберите "Azure Active Directory".
        -   В меню Azure AD выберите "App registrations" и нажмите "New registration".
        -   Укажите имя для вашего приложения.
        -   Выберите "Accounts in any organizational directory and personal Microsoft accounts".
        -   В поле "Redirect URI" выберите "Web" и введите `http://localhost`.
        -   Нажмите "Register".
    2.  **Настройка разрешений для приложения:**
        
        -   В разделе "App registrations" выберите ваше приложение.
        -   В левом меню перейдите в "API permissions".
        -   Нажмите "Add a permission" и выберите "Microsoft Graph".
        -   Выберите "Delegated permissions".
        -   В поиске введите "Mail.Read" и отметьте его.
        -   Нажмите "Add permissions".
    3.  **Получение Client ID и Client Secret:**
        
        -   В разделе "App registrations" выберите ваше приложение.
        -   В левом меню перейдите в "Overview". Здесь вы найдете "Application (client) ID" - это ваш Client ID.
        -   Для получения Client Secret перейдите в "Certificates & secrets" в левом меню.
        -   Нажмите "New client secret", укажите описание и срок действия. Нажмите "Add".
        -   Скопируйте значение Client Secret. **Сохраните его сейчас, так как после ухода со страницы он будет скрыт.**
    4.  Авторизация и получение токена:
        
        1.  **Первоначальная авторизация:** Для начала вам нужно будет авторизоваться вручную, чтобы получить первый токен доступа и обновления.
            
            -   Запустите auth1.py               
                
            -   Перейдите по предоставленной ссылке и авторизуйтесь с вашим аккаунтом Microsoft.
                
            -   После авторизации вы будете перенаправлены на `http://localhost` (или другой указанный вами URI). В адресной строке будет параметр `code`. Скопируйте его.
                
        2.  **Получение токена:** Теперь, когда у вас есть код авторизации, вы можете использовать его для получения токена доступа.
            
            -   Запустите auth2.py
                
            -   Вставьте ранее скопированный код авторизации, когда будет запрошено.
                
            -   Если все прошло успешно, вы увидите ваш токен доступа.
                
        -   **Инструкция по получению API и данных для авторизации через Microsoft Graph API для Outlook Mail:**
    1.  **Регистрация приложения в Azure AD:**
        
        -   Перейдите на [Azure Portal](https://portal.azure.com/).
        -   В левом меню выберите "Azure Active Directory".
        -   В меню Azure AD выберите "App registrations" и нажмите "New registration".
        -   Укажите имя для вашего приложения.
        -   Выберите "Accounts in any organizational directory and personal Microsoft accounts".
        -   В поле "Redirect URI" выберите "Web" и введите `http://localhost`.
        -   Нажмите "Register".
    2.  **Настройка разрешений для приложения:**
        
        -   В разделе "App registrations" выберите ваше приложение.
        -   В левом меню перейдите в "API permissions".
        -   Нажмите "Add a permission" и выберите "Microsoft Graph".
        -   Выберите "Delegated permissions".
        -   В поиске введите "Mail.Read" и отметьте его.
        -   Нажмите "Add permissions".
    3.  **Получение Client ID и Client Secret:**
        
        -   В разделе "App registrations" выберите ваше приложение.
        -   В левом меню перейдите в "Overview". Здесь вы найдете "Application (client) ID" - это ваш Client ID.
        -   Для получения Client Secret перейдите в "Certificates & secrets" в левом меню.
        -   Нажмите "New client secret", укажите описание и срок действия. Нажмите "Add".
        -   Скопируйте значение Client Secret. **Сохраните его сейчас, так как после ухода со страницы он будет скрыт.**
    4.  Авторизация и получение токена:
        
        1.  **Первоначальная авторизация:** Для начала вам нужно будет авторизоваться вручную, чтобы получить первый токен доступа и обновления.
            
            -   Запустите auth1.py               
                
            -   Перейдите по предоставленной ссылке и авторизуйтесь с вашим аккаунтом Microsoft.
                
            -   После авторизации вы будете перенаправлены на `http://localhost` (или другой указанный вами URI). В адресной строке будет параметр `code`. Скопируйте его.
                
        2.  **Получение токена:** Теперь, когда у вас есть код авторизации, вы можете использовать его для получения токена доступа.
            
            -   Запустите auth2.py
                
            -   Вставьте ранее скопированный код авторизации, когда будет запрошено.
                
            -   Если все прошло успешно, вы увидите ваш токен доступа.
                
        полученный REFRESH_TOKEN тоже добавляем в settings.py
